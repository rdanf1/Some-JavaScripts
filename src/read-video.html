<!DOCTYPE html>
  <body>
    <!-- - Though, It's UP ! (Said Mr Tournesol - no HEAD...) -->
    <footer id="myFooter">
       <!-- 'multiple' is html5 for 'multiple="multiple"' :P -->
      <input style="display:none;" type="file" multiple id="myInput"/>     
      
      <!-- A button that Overrides defaults "look" of above input, because 
               1.input style is "display:none;"
           And 2.onclick of this is defined as input.click() later     -->
      <button id="myInputButton">(S)elect Videos</button>
      
      <!-- Other buttons -->
      <button id="myInvertButton">(I)nvert Background</button>
      <button id="myNextButton">(N)ext-></button>
      <button id="myPrevButton"><-(B)ack</button>
      <button id="myHideButton">^(H)ide^</button>
      <!-- Filename text - beside buttons : with style "display:inline" : construction later -->
      <p id="myFileName"></p>
    </footer>
    <main>
      <video id="myVideo" controls autoplay></video>  <!-- Inner Construction later : after input !!! -->
    </main>
    <div id="root_container_overlay">
      <div><img id="myBackgroundImg"> <!-- src="https://my.website.net/static/Wallpaper_Imagine_04_DR.webp"> 
                                                I was here : added later by JS script -->
      </div>
    </div>
  </body>
  
  <!--*************************************JAVASCRIPT***********************************************-->
  
  <script>
    
    // JS VARS //
    
    var input  = document.getElementById('myInput'), 
        fileInputNbr = 0,
        buttonInp = document.getElementById('myInputButton'),
        buttonNxt = document.getElementById('myNextButton'),
        buttonPrv = document.getElementById('myPrevButton'),
        buttonInv = document.getElementById('myInvertButton'),
        fileName  = document.getElementById('myFileName'),
        footer    = document.getElementById('myFooter'),
        buttonHid = document.getElementById('myHideButton'),
        img    = document.getElementById('myBackgroundImg'),
        backRoot = document.getElementById('root_container_overlay'),
        video  = document.getElementById('myVideo');
    
    // TODO: Input both images (1 more button on top right corner)
    const srcImgBckgrd = '../img2/Wallpaper_Imagine_04_DR.webp';
    img.setAttribute("src", srcImgBckgrd);                  // Set background <img image
        
    buttonInp.onclick = function () {                       // Redefines input button (better look!)
   	input.click();
    }
    
    var bool   = true;
    buttonInv.onclick = function () {
      if (bool  === true) {                                 // Swap between applying or not applying colors invertion
        img.setAttribute("style",                           // Fit screen
          "width: 100%; height: 100%; object-fit: contain;\
-webkit-filter: invert(1);filter: invert(1);");             // Colors Invertion
        bool = false;
      } else {
           img.setAttribute("style",                        // Fit screen
          "width: 100%; height: 100%; object-fit: contain;");
        bool = true;
      };         
      console.log(img);  // Test modified value
    }
    
    //   INPUT ONCHANGE //
    
    fileNbr = 0;
    input.onchange = function (fileNbr) {
        // Initial state
        
        // "this.files" is tricky to sort... => google search string = "sort objects by names javascript"
        // Got it From 3rd result : 
        //    https://stackoverflow.com/questions/1424196/how-to-sort-javascript-object-array-by-element-name
        //
        var filesSorted = [].slice.call(this.files).sort(function(a, b) { return 2 * (a.name > b.name) - 1; });
        
        var file = filesSorted[fileNbr];
        if (file == null) { fileNbr = 0 };        
        fileInputNbr = fileNbr;  // Can be the same thing eventually...
        
        GoFullScreen(video);  // Guess It !
	
        video.load();      // Allows 2d inputs (1+n) to load & start correctly in <video
        
        // INFO : virtual full path is "C:\fakepath\<name of chosen file>" !!! 
        //        =>> Can't save ! See console output ! (idem for BLOB file)
        console.log(input.value);
        
        // Construction of video inner <source src=...
        //file = this.files[fileNbr];     // is tmp BLOB from/not real file (can't save/re-use - I dunno how...)
        file = filesSorted[fileNbr];
        var url = URL.createObjectURL(file);               
        video.innerHTML = '<source src="' + url + '">';
                    // <Using <pre> tag to insert many spaces   // this.files[FileNbr].name;
        fileName.innerHTML = "<pre>  ---  </pre>" + "File name : " + file.name + "<pre>  ---  </pre>"; 
        console.log(fileName);
        // kept here (and at load time) for re-inputs after window resize
        video.setAttribute("width", window.innerWidth + 'px');  
        console.log(video);  // Test modifications of <video element (DR)
         	
    }
    
    // Fixed values for video ( defined when loading or re-loading the whole web page )
    
    window.onload = function() {
    	video.setAttribute("width", window.innerWidth + 'px');  // always the same... (mine ~ 1360px)
    } 

    // BUTTONS EVENTS

    buttonNxt.onclick = function () {                // Next button
   	fileInputNbr = fileInputNbr + 1;
   	console.log(fileInputNbr);
   	input.onchange(fileInputNbr);
    }
   
    buttonPrv.onclick = function () {                // Prev button
   	fileInputNbr = fileInputNbr - 1;
   	console.log(fileInputNbr);
   	input.onchange(fileInputNbr);
    }
    
    buttonHid.onclick = function HideFooter() {  // HIDE BUTTONS MENU ( press h to unhide ! )
    	var display = myFooter.style.display;
    	if(display=="none")
        	myFooter.style.display="block";
    	else
        	myFooter.style.display="none";
    }
    
    
    var videoOpacity = 1.00;
    var backOpacity = 0.24;
    var backOnOff = new Boolean(true);
    
    document.onkeyup=function(e) {         // Shortcuts NEXT/PREV and demonstrate use of $("#id") is JQuery Only.
    	var e = e || window.event;
  	if (e.key == "b") {			// "b" pressed (previous video)
    		buttonPrv.click();
  	} else if (e.key == "n") {		// "n" pressed (next video) 
    		buttonNxt.click();
    	} else if (e.key == "h") {		// "h" pressed (unhide/hide buttons)
    		buttonHid.click(); 
    	} else if (e.key == "s") {		// "s" pressed (Select videos input) 
    		buttonInp.click();
    	} else if (e.key == "i") {		// "i" pressed (invert background color)event.shiftKey
    		buttonInv.click(); 
    	} else if (e.key == "o") {		// "o" undocumented ( decrease video opacity : for fullscreen )
    		videoOpacity = videoOpacity - 0.06;
    		video.setAttribute("style", 'opacity: ' + videoOpacity);
    		console.log(video);
    	} else if (e.key == "Shift") { 		// "Shift" undocumented ( unset video opacity )
    		videoOpacity = 1.00;
    		video.setAttribute("style", 'opacity: ' + videoOpacity);
    		console.log(video);
    	} else if (e.key == "p") {		// "p" undocumented ( decrease background img opacity )
    		backOpacity = backOpacity - 0.04;
    		backRoot.setAttribute("style", 'opacity: ' + backOpacity);
    		console.log(video);       
                         // "Ctrl" undocumented ( reset backgrnd img on top ! or to default alterntively !!! )
    	} else if (e.key == "Control") {  
    		backOnOff === true ? backOpacity = 1.00 : backOpacity = 0.24;
    		backOnOff = !(backOnOff);      // Use "p" to attenuate "top" Please and "- Keep Control !!!"
    		console.log(backOnOff);
    		backRoot.setAttribute("style", 'opacity: ' + backOpacity);  // NB : Useless on fullscreen !IMPORTANT
    		console.log(video);
    	}
    }
    
    // I just have created my first (standing alone) JS function !
    
    function GoFullScreen(element) {
    	// Go Fullscreen (tries - no IE case :P )
        var el = element
   	 , rfs = // for newer Webkit and Firefox
           el.requestFullscreen
        || el.webkitRequestFullScreen
        || el.mozRequestFullScreen
        || el.msRequestFullscreen;
	if(typeof rfs!="undefined" && rfs){
  		rfs.call(el);
	}
    }
    
     // Some tries for default opacity values depending on Fullscreen status (& double-clicks)
 // //( despite an fs detection not quite reliable, it works in all cases (except if you strike Ctrl key twice...)
    ///   ^   ^    ^      ^^      ^    ^         ^   ^    ^^    -       ^   --  - -POO-R--S -RH---YMI-NG PA-TTERNS !
     
     fsBool = false;
    
     window.onchange = function () {  
    	if (!window.screenTop && !window.screenY) {
 	 // it's fullscreen!
	video.setAttribute("style", 'opacity: ' + 0.80);
	fsBool = true;
    	} else {
	video.setAttribute("style", 'opacity: ' + 1.00);
    	}
     } 
     
     addEventListener("dblclick", (event) => {});   // Double clicks 
                                                    // swap between fullscreen or not fullscreen (the Question !)
     ondblclick = (event) => {			// NB: If inverted do fast repeated clicks will re-order IT ! (sorry)
     	fsBool ? video.setAttribute("style", 'opacity: ' + 0.80)
     	       : video.setAttribute("style", 'opacity: ' + 1.00);
     	fsBool = !(fsBool);
     	};
    
  /*  document.onkeydown=function(e) {         // Shortcuts NEXT/PREV and demonstrate use of $("#id") is JQuery Only.
    	var e = e || window.event;
  	if (e.key == 66) {			// "b" pressed (previous video)
    		buttonPrv.click();
  	} else if (e.which == 78) {		// "n" pressed (next video) 
    		buttonNxt.click();
    	} else if (e.which == 72) {		// "h" pressed (unhide/hide buttons) */

    //
    // MIGRATED FROM STATIC CSS DEFINITIONS ( need to be changed eventually ! ) //
    //
    
    var backImg = "../img2/Wallpaper_Imagine_04_DR.webp"; 
    // Array of texts with selectors and their attributes:values 
    const selectorsAdded = ['#myVideo::backdrop{background-image : url("'                   // at this moment
    				+ backImg + '");opacity: 1.00;border: #800 solid 2px;}'];  // 1 single value
    
    function AddStyleToMain(selectorsAdded) {
      const main = document.querySelector("main"); // Sample querySelector */
    
        // TODO: Input both (1 more button on top right corner)
      const addStyle = document.createElement("style");
                // Using += on null is ok ?!.. (open for other additions) 
      addStyle.innerHTML  += selectorsAdded[0];                        // TODO: Append array of selectors...
//    addStyle.innerHTML += '#myVideo:hover{border: #800 solid 5px;}'; // For testing (reduce video scale :P!)
      
      main.appendChild(addStyle);  // Add style section after main !!!
      console.log(main);  // Check !
    }
    
    AddStyleToMain(selectorsAdded);

//  main.removeChild(scrollbar);

  </script>
  
  <!--*************************************STYLES**************************************************-->
  
  <style>                       /* Optionnals attributes : type="text/css" media="screen" */
    body {
    	margin: 0;  /* Overrides default 8px... */
    }
    #root_container_overlay {      /* 1st div background */
    	pointer-events: none;
    	width: 100vw;
    	height: 100vh;
    	position: fixed;
    	opacity: 0.24;
    	z-index: 1000000;
    	display: flex;
    	top: 0px;
    	left: 0px;
    }
    div div {                      /* 2d div background */
    	flex-grow: 1;
    }
    #myBackgroundImg {             /* <img tag */
    	width: 100%;
    	height: 100%;
    	object-fit: contain;
    }
    p, pre {                       /* File texts - after/next to buttons */
     	display: inline;
    }
    
    /*^^^ MIGRATED IN JS part above (COMMENTS STILL APPLIES) ^^^*/
/*    video::backdrop {    /* Fullscreen with background image preserved or redefined (1/2) */
/*   	opacity: 1.0;      /* reduce to see other background img : 1.0 to see exclusively this img */ 
/*  	background-image : url("../img2/Wallpaper_Imagine_04_DR.webp"); /* Static "- At this moment..." */
/*    } */
    /*^^^ MIGRATED IN JS part above (COMMENTS STILL APPLIES) ^^^*/
/*    video {	    /* Fullscreen with background image preserved - lighten contents ! (2/2) */  
/*    	opacity: 1.0;	 /* OK reduce to see other img-s - or use "o" key (OK ?!..) or SHIFT = 1.0 */
/*    }		/* in backdrop mode (fullscreen) enhance 2d background image (defined in upper selector) 
    	
  </style>
</html>
